## Описание
Для того, чтобы внедрять зависимости или запрашивать их у контейнера, необходимо их зарегистрировать.
Подробнее о **инсталляции** зависимостей подробнее можно почитать в **Context and Installers** документации.

## Регистрация
Как было описано в **Context and installers.md**, для регистрации нужен **Installer**.
**Installer** должен реализовать метод **Install**, и принимать параметр **IContainerConstructor**.

При обращении к **IContainerConstructor** мы получаем доступ к регистрации.

Пример регистрации -

```csharp
public class PlayerInstaller : MonoInstaller
{
    public override void Install(IContainerConstructor constructor) 
    {
        // Регистрация без указания абстракции
        constructor.Register<PlayerController>(DependencyLifetime.Singleton);
        
        // Регистрация как реализации интерфейса
        constructor.Register<IPlayerController, PlayerController>(DependencyLifetime.Replaceable);
    }
}
```

## Времена жизни
У каждой зависимости должно быть установлено время жизни. Описание каждого времени жизни -

- **Singleton** - один экземпляр(с учетом тега и установленной абстракции) на весь контейнер,


- **Transient** - каждый раз создается полностью новый экземпляр. Старый не очищается

## Плавучая регистрация
Сразу после использования метода **Register** у конструктора контейнера, вам открывается доступ к указанию дополнительных параметров для зависимости.

На данный момент имеются следующие методы указания дополнительных параметров для зависимости - 

- **WithTag** - позволяет установить тег для зависимости. Главное - одна и та же зависимость не может быть зарегистрирована 2 раза, а также один и тот же интерфейс, независимо от того какая реализация ему установлена, не может быть просто зарегистрирован 2 раза. Но если при регистрации вы указали тег с помощью данного метода - то даже зависимости одного типа, или один и тот же интерфейс, если они с разными тегами, будут независимы друг от друга.


- **WithInstance** - позволяет вручную установить экземпляр для зависимости. Не имеет смысла использовать это для Transient обьектов.


- **OnGameObject** - позволяет при регистрации компонентов установить родительский обьект данного компонента. Если не установить его - при иньекции или ручном запросе зависимости будет возвращен первый найденный компонент данного типа на сцене.



## Уточнение
Регистрация, сборка контейнера, его валидирование и иньекция происходят в **Awake**. Используйте метод **Start** в Unity, для гарантии того, что все зависимости были успешно внедрены.